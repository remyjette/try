{% extends "layout.html" %}
{% block body %}
  <div class="header centertext">
    Admin
  </div>
  <div>
    <form name="new_course_form" action="" method="POST">
      Add new course:
      <input type="text" name="new_course_name" />
      <input type="submit" name="submit" value="Add Course" />
    </form>
  </div>
  <div class="header">Courses:</div>
  {% for course in courses %}
  <div><a href="/admin/{{ course.name }}/">{{ course.name }}</a></div>
  {% endfor %}

  {% if course %}
  <hr />
  <div class="header centertext">
    {{course.name}}
  </div>
  <div>
    <div class="header">Edit Course</div>
      <form name="edit_course_form" action="" method="POST">
      <p>
        Course Name:<br />
        <input type="text" name="course_name" value="{{course.name}}" />
      </p>
      <p>
        Student list:<br />
        <textarea rows="15" cols="20" name="student_list">{% for student in course.student_list %}{{student}}&#13;&#10;{% endfor %}</textarea>
      </p>
      <input type="submit" name="submit" value="Save" />
    </form>
  <div>
    <form name="new_assignment_form" action="" method="POST" enctype="multipart/form-data">
      <div class="header">Add new assignment:</div>
      Assignment Name: <input type="text" name="new_assignment_name" /><br />
      Release Code (optional): <input type="file" name="release-code" id="release-code" />
      <input type="submit" name="submit" value="Add Assignment" />
    </form>
  </div><br /><br />
  <div class="header">Assignments:</div>
  {% for assignment in course.assignments %}
  <div><a href="/admin/{{assignment.course.name}}/{{ assignment.name }}/">{{ assignment.name }}</a></div>
  {% endfor %}
  {% endif %}

  {% if assignment %}
  <hr />
  <div class="header centertext">
    {{assignment.name}}
  </div>
  <div>
    <form name="grade_assignment" action="grade/" method="POST" enctype="multipart/form-data">
    Grade {{assignment.name}} (upload submissions.zip):
    <input type="file" name="submissions_archive" />
    <input type="submit" name="grade_assignment" value="Grade" />
    </form>
  </div>
  <div>
    <form name="add_test_file_form" action="" method="POST" enctype="multipart/form-data">
      Add new test file:
      <input type="file" name="test-file" id="test-file" />
      <input type="hidden" name="testfile_name" value="" />
      <input type="submit" name="submit" value="Add New Test File" />
    </form>
  </div>
  {% for testfile in assignment.testfiles %}
  <div>{{ testfile.filename }}</div>
  <form action="" method="POST">
  <input type="hidden" name="testfile_id" value="{{testfile.id}}" />
  {% for unittest in testfile.unittests %}
  <div>
    Test: <input type="text" name="name_{{unittest.id}}" value="{{unittest.friendly_name}}" /><br />
    Weight: <input type="number" name="weight_{{unittest.id}}" value="{{unittest.weight}}" /><br />
    Is Public: <input type="checkbox" name="public_{{unittest.id}}" {% if unittest.is_public %}checked{% endif %}
  </div>
  {% endfor %}
  <br />
  <input type="submit" name="modify_unittests" value="Save" />
  </form>
  {% endfor %}
  {% endif %}
{% endblock %}
